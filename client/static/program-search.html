<!doctype html> <!--later on: make the table load only 50 entries at a time and provide  <-prev 1 2 3 4 5 ... N next-> menu to navigate the chunks-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>BugHound</title>
    <meta name="description" content="BugHound">
    <meta name="author" content="SitePoint">
    <link rel="stylesheet" type="text/css" href="./css/element-search.css">
  </head>

  <body onload="loadPageContent()">
    <h1 style="display: inline; margin-right:20px;">Program Search</h1>
    <nav style="display: inline;">
      <a href="./menu.html">Menu</a>
      <a href="./program-search.html">Programs</a>
      <a href="./area-search.html">Areas</a>
      <a href="./issue-search.html">Issues</a>
      <a href="./employee-search.html">Employees</a>
      <a onclick="logout()">Logout</a>
    </nav>
    <p>Find programs by any of the following fields: "ID, name, user level."</p> <!--TODO: verfiy this is the correct list of searchable fields-->
    <br>
    <div id=keyword-search-bar>Keywords: <input type=text> <input onclick="searchProgram('input goes here')" type=submit name=Search></div>
    <br>
    <h2>Results</h2>
    <table border="1">
      <tr>
        <th>Program ID</th>
        <th>Program Name</th>
        <th>Version</th>
        <th>Release</th>
        <th>actions</th>
      </tr>
      <div id="database-viewport>">
        <tr id="data-table-row-1"> <!--TODO: upon loading the page, populate the program's information row by row-->
        <td><span id=data-table-row-1-program-id-value>{{ program.id }}</span></td></td>
        <td><span id=data-table-row-1-program-value>{{ program.name }}</span></td><!--TODO: change this href to pass the identifier for the specific program as query arg.-->
        <td><span id=data-table-row-1-version-value>{{ program.versionID.name }}</td>
        <td><span id=data-table-row-1-release-value>{{ program.release }}</td>
        <td><!--TODO: link this to the particular program belonging to this row in the href-->
          <a href="./program-view.html">View</a> |
          <a href="./program-edit.html">Edit</a> |
          <a onclick="deleteProgram('{{ program.id }}')" id="delete-{{ program.id }}-button">Delete</a>
        </td>
      </tr>
    </div>
    </table>
    <br>
    <br>
    <p>Missing an program? Add one <a style="margin: 0;" href="./program-edit.html">here</a>.</p>
  </body>

  <script type="text/javascript" src="./js/gui-scripts.js"></script>
  <script>
    function searchProgram(keywords) {
      alert("searching for program. Press to continue")
      //TODO: search the database and return elements that satify the given keywords in any of the searchable fields.
    }

    function loadPageContent() {
      //TODO: populate the database-viewport with ALL entires in the relevant database table
    }

    function deleteProgram(id) {
      //TODO: pop up to confirm the deletion.
      //communicate to backend to delete the correct entry
      //reload the table with the just-deleted entry gone.
      alert("You're about to delete!");
      window.location.href = "./program-search.html";
    }
  </script>

</html>
